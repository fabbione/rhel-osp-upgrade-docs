<!DOCTYPE html>
<html>
<title>Upgrading MySQL 5.1 to MariaDB 5.5</title>

<xmp theme="bootstrap" style="display:none;">

RHOS 4.0 requires MariaDB 5.5, whereas RHOS 3.0 used MySQL 5.1.
Before upgrading to RHOS 4.0 you will need to upgrade your database
software from MySQL 5.1 to MariaDB 5.5.  As of this writing,
MariaDB in RHEL is available as part of a [software collection][scl].

1. [Shut down your OpenStack services](#shutdown).

1. [Configure your system to access Red hat Software Collections][scl-using]

1. Shut down and disable mysql:

       # service mysqld stop
       # chkconfig mysqld off

1. Install the `mariadb55` software collection:

       # yum install mariadb55

1. Relocate the MySQL data files to the location used by the MariaDB
package:

       # rm -rf /opt/rh/mariadb55/root/var/lib/mysql/
       # cp -r /var/lib/mysql/ /opt/rh/mariadb55/root/var/lib/mysql/
       # chown -R mysql:mysql /opt/rh/mariadb55/root/var/lib/mysql/
       # restorecon -R /opt/rh/mariadb55/root/var/lib/mysql/

1. Start the MariaDB server (and configure it to start a boot):

       # service mariadb55-mysqld start
       # chkconfig mariadb55-mysqld on

1. Upgrade the databases:

       # scl enable mariadb55 mysql_upgrade

1. [Restart your OpenStack services](#startup).

[scl]: https://access.redhat.com/site/documentation/en-US/Red_Hat_Software_Collections/1/html/1.0_Release_Notes/index.html
[scl-using]: https://access.redhat.com/site/documentation/en-US/Red_Hat_Software_Collections/1/html/1.0_Release_Notes/chap-Installation_and_Usage.html#sect-Installation_and_Usage-Subscribe

</xmp>
<script src="strapdown/v/0.2/strapdown.js"></script>
</html>

<!-- vim: set ft=markdown : -->

